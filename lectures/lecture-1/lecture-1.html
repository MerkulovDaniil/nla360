<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.41">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>–õ–µ–∫—Ü–∏—è 1: –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π, –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –Ω–æ—Ä–º—ã</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-48ffa3e5b9d089919c6712c39e5b00f2.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-7f2a93ce03cd03d77aaf1c7855d4b88b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/copy-tex.min.js" integrity="sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A" crossorigin="anonymous"></script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="–õ–µ–∫—Ü–∏—è 1: –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π, –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –Ω–æ—Ä–º—ã">
<meta property="og:description" content="">
<meta property="og:image" content="https://nla360.fmin.xyz/lectures/lecture-1/Babylonian_numerals.png">
<meta property="og:image:height" content="534">
<meta property="og:image:width" content="900">
<meta name="twitter:title" content="–õ–µ–∫—Ü–∏—è 1: –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π, –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –Ω–æ—Ä–º—ã">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://nla360.fmin.xyz/lectures/lecture-1/Babylonian_numerals.png">
<meta name="twitter:image-height" content="534">
<meta name="twitter:image-width" content="900">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../logo.svg" alt="nla360.fmin.xyz" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <span class="nav-link">
<span class="menu-text">program.md</span>
    </span>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">üìΩÔ∏è –ü—Ä–æ–µ–∫—Ç—ã</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/MerkulovDaniil/nla360" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="https://www.youtube.com/@fmin" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-youtube"></i></a>
    <a href="https://t.me/nla360" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-telegram"></i></a>
    <a href="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-table"></i></a>
    <a href="https://fmin.xyz" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-gem"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>

<header id="title-block-header">
</header>


<section id="–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ-—á–∏—Å–µ–ª" class="level1">
<h1>–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —á–∏—Å–µ–ª</h1>
<ul>
<li>–í–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —á–∏—Å–ª–∞ —è–≤–ª—è—é—Ç—Å—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º–∏ –≤ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ –∏ –Ω–∞—É–∫–µ, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–µ –≤–µ–ª–∏—á–∏–Ω—ã, —Ç–∞–∫–∏–µ –∫–∞–∫:
<ul>
<li>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ (–æ—Ç 0 –¥–æ 1)</li>
<li>–§–∏–∑–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è (–º–∞—Å—Å–∞, —Å–∫–æ—Ä–æ—Å—Ç—å, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏ —Ç.–¥.)</li>
<li>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (—Ü–µ–Ω—ã, –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ —Å—Ç–∞–≤–∫–∏)</li>
<li>–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–µ–ª–∏—á–∏–Ω—ã (<span class="math inline">\pi</span>, <span class="math inline">e</span>, <span class="math inline">\sqrt{2}</span>)</li>
</ul></li>
<li>–ò—Å—Ç–æ—Ä–∏—è —Å–∏—Å—Ç–µ–º —Å—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ç—ã—Å—è—á–∏ –ª–µ—Ç:
<ul>
<li>–í–∞–≤–∏–ª–æ–Ω—è–Ω–µ (2000 –¥–æ –Ω.—ç.) —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∏ –æ–¥–Ω—É –∏–∑ –ø–µ—Ä–≤—ã—Ö –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º —Å—á–∏—Å–ª–µ–Ω–∏—è</li>
<li>–û–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å–∏—Å—Ç–µ–º—É —Å –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º 60 (—à–µ—Å—Ç–∏–¥–µ—Å—è—Ç–µ—Ä–∏—á–Ω—É—é), –∫–æ—Ç–æ—Ä–∞—è –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ, –∫–∞–∫ –º—ã –∏–∑–º–µ—Ä—è–µ–º –≤—Ä–µ–º—è —Å–µ–≥–æ–¥–Ω—è</li>
<li>–ò—Ö —Å–∏—Å—Ç–µ–º–∞ –º–æ–≥–ª–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞–∫ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞, —Ç–∞–∫ –∏ –¥—Ä–æ–±–∏</li>
</ul></li>
</ul>
<p><img src="./Babylonian_numerals.png" width="500"></p>
<ul>
<li>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã –º–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–≤–æ–∏—á–Ω—ã–µ (—Å –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º 2) —á–∏—Å–ª–∞:
<ul>
<li>–í—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ 0 –∏ 1</li>
<li>–≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª</li>
<li>–ù–∞–º –Ω—É–∂–Ω—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–∫ –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö, —Ç–∞–∫ –∏ –æ—á–µ–Ω—å –º–∞–ª—ã—Ö —á–∏—Å–µ–ª</li>
<li>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é, –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–º—è—Ç–∏</li>
<li>–ü–æ–Ω–∏–º–∞–Ω–∏–µ —ç—Ç–∏—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —á–∏—Å–ª–µ–Ω–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è</li>
</ul></li>
</ul>
<section id="–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ-—á–∏—Å–µ–ª-—Å-—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π-—Ç–æ—á–∫–æ–π" class="level2">
<h2 class="anchored" data-anchor-id="–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ-—á–∏—Å–µ–ª-—Å-—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π-—Ç–æ—á–∫–æ–π">–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —á–∏—Å–µ–ª —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–æ—á–∫–æ–π</h2>
<ul>
<li>–ß–∏—Å–ª–∞ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–æ—á–∫–æ–π - –ø—Ä–æ—Å—Ç–µ–π—à–∏–π —Å–ø–æ—Å–æ–± –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–º –≤–∏–¥–µ
<ul>
<li>–¢–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–µ–Ω –∫–∞–∫ —Ñ–æ—Ä–º–∞—Ç <strong>Qm.n</strong>, –≥–¥–µ:
<ul>
<li>m –±–∏—Ç –¥–ª—è —Ü–µ–ª–æ–π —á–∞—Å—Ç–∏</li>
<li>n –±–∏—Ç –¥–ª—è –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏</li>
</ul></li>
</ul></li>
<li>–û—Å–Ω–æ–≤–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:
<ul>
<li>–î–∏–∞–ø–∞–∑–æ–Ω: <span class="math inline">[-(2^m), 2^m - 2^{-n}]</span></li>
<li>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: <span class="math inline">2^{-n}</span> (–Ω–∞–∏–º–µ–Ω—å—à–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º–∞—è —Ä–∞–∑–Ω–∏—Ü–∞)</li>
<li>–•—Ä–∞–Ω–µ–Ω–∏–µ: –≤—Å–µ–≥–æ <span class="math inline">m + n + 1</span> –±–∏—Ç (–≤–∫–ª—é—á–∞—è –∑–Ω–∞–∫–æ–≤—ã–π –±–∏—Ç)</li>
</ul></li>
<li>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
<ul>
<li>–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º—ã—Ö —á–∏—Å–µ–ª</li>
<li>–ö–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º (m) –∏ —Ç–æ—á–Ω–æ—Å—Ç—å—é (n)</li>
<li>–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –∏–ª–∏ –æ—á–µ–Ω—å –º–∞–ª—ã—Ö —á–∏—Å–µ–ª</li>
</ul></li>
</ul>
</section>
</section>
<section id="—á–∏—Å–ª–∞-—Å-–ø–ª–∞–≤–∞—é—â–µ–π-—Ç–æ—á–∫–æ–π" class="level1">
<h1>–ß–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π</h1>
<p>–ß–∏—Å–ª–∞ –≤ –ø–∞–º—è—Ç–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ <strong>—á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π</strong>.</p>
<p>–ß–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫:</p>
<p><span class="math display">\textrm{number} = \textrm{significand} \times \textrm{base}^{\textrm{exponent}},</span></p>
<p>–≥–¥–µ: - <em>significand</em> (–∑–Ω–∞—á–∞—â–∞—è —á–∞—Å—Ç—å) - —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ - <em>base</em> (–æ—Å–Ω–æ–≤–∞–Ω–∏–µ) - –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ<br>
- <em>exponent</em> (–ø–æ–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç–µ–ø–µ–Ω–∏) - —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º)</p>
<p>–ù–∞–ø—Ä–∏–º–µ—Ä:</p>
<p><span class="math display"> 1.2 = 12 \cdot 10^{-1}.</span></p>
<p>–≠—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç –∏–º–µ–µ—Ç –¥–æ–ª–≥—É—é –∏—Å—Ç–æ—Ä–∏—é. –û–Ω —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ –ø–µ—Ä–≤–æ–º –≤ –º–∏—Ä–µ —Ä–∞–±–æ—Ç–∞—é—â–µ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º–æ–º, –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ü–∏—Ñ—Ä–æ–≤–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ <a href="https://en.wikipedia.org/wiki/Z3_(computer)">Z3</a>, —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤ 1935 –≥–æ–¥—É –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–º –≤ 1941 –≥–æ–¥—É –≤ –ì–µ—Ä–º–∞–Ω–∏–∏ <a href="https://en.wikipedia.org/wiki/Konrad_Zuse">–ö–æ–Ω—Ä–∞–¥–æ–º –¶—É–∑–µ</a>.</p>
<section id="—á–∏—Å–ª–∞-—Å-–ø–ª–∞–≤–∞—é—â–µ–π-—Ç–æ—á–∫–æ–π-—Ñ–æ—Ä–º—É–ª–∞" class="level2">
<h2 class="anchored" data-anchor-id="—á–∏—Å–ª–∞-—Å-–ø–ª–∞–≤–∞—é—â–µ–π-—Ç–æ—á–∫–æ–π-—Ñ–æ—Ä–º—É–ª–∞">–ß–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π: —Ñ–æ—Ä–º—É–ª–∞</h2>
<p><span class="math display">f = (-1)^s 2^{(p-b)} \left( 1 + \frac{d_1}{2} + \frac{d_2}{2^2}  + \ldots + \frac{d_m}{2^m}\right),</span></p>
<p>–≥–¥–µ <span class="math inline">s \in \{0, 1\}</span> - –∑–Ω–∞–∫–æ–≤—ã–π –±–∏—Ç, <span class="math inline">d_i \in \{0, 1\}</span> - <span class="math inline">m</span>-–±–∏—Ç–Ω–∞—è –º–∞–Ω—Ç–∏—Å—Å–∞, <span class="math inline">p \in \mathbb{Z}; 0 \leq p \leq 2^e</span>, <span class="math inline">e</span> - <span class="math inline">e</span>-–±–∏—Ç–Ω–∞—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞, –æ–±—ã—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–∞—è –∫–∞–∫ <span class="math inline">2^e - 1</span></p>
<p>–ú–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—É—é <span class="math inline">m</span>-–±–∏—Ç–Ω—É—é —Å–µ—Ç–∫—É –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Å—Ç–µ–ø–µ–Ω—è–º–∏ —á–∏—Å–ª–∞ <span class="math inline">2</span>.</p>
</section>
<section id="–ø—Ä–æ—Å—Ç—ã–µ-–ø—Ä–∏–º–µ—Ä—ã" class="level2">
<h2 class="anchored" data-anchor-id="–ø—Ä–æ—Å—Ç—ã–µ-–ø—Ä–∏–º–µ—Ä—ã">–ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã</h2>
<p>–°—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–æ–≤ –∑–∞–ø–∏—Å–∞—Ç—å —á–∏—Å–ª–æ –≤ –Ω–∞—É—á–Ω–æ–π –Ω–æ—Ç–∞—Ü–∏–∏, –Ω–æ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å —Ä–æ–≤–Ω–æ –æ–¥–Ω–æ–π –Ω–µ–Ω—É–ª–µ–≤–æ–π —Ü–∏—Ñ—Ä–æ–π —Å–ª–µ–≤–∞ –æ—Ç –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —Ç–æ—á–∫–∏.</p>
<p>For example: - <span class="math inline">0.232 \times 10^3 = 23.2 \times 10^1 = 2.32 \times 10^2 = \ldots</span> - <span class="math inline">01001 = 1.001 \times 2^3 = \ldots</span></p>
<p><strong>–ü—Ä–∏–º–µ—Ä 1:</strong> –ö–∞–∫–æ–≤–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞ <span class="math inline">00101101.101</span>?</p>
<p><span class="math inline">0.0001101001110</span> <span class="math inline">= 1.110100111 \times 2^{-4}</span></p>
</section>
<section id="—É–º–Ω–æ–∂–µ–Ω–∏–µ-–±–æ–ª–µ–µ-–ø–æ–¥—Ä–æ–±–Ω–æ" class="level2">
<h2 class="anchored" data-anchor-id="—É–º–Ω–æ–∂–µ–Ω–∏–µ-–±–æ–ª–µ–µ-–ø–æ–¥—Ä–æ–±–Ω–æ">–£–º–Ω–æ–∂–µ–Ω–∏–µ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ</h2>
<p>–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –¥–≤–∞ —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π <span class="math inline">x, y</span>, —É –∫–æ—Ç–æ—Ä—ã—Ö —ç–∫—Å–ø–æ–Ω–µ–Ω—Ç—ã –∏ –¥—Ä–æ–±–Ω—ã–µ —á–∞—Å—Ç–∏ —Ä–∞–≤–Ω—ã <span class="math inline">x_e, y_e</span> –∏ <span class="math inline">x_m, y_m</span> —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—ã—á–Ω–æ–≥–æ —É–º–Ω–æ–∂–µ–Ω–∏—è —á–∏—Å–µ–ª —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –±—É–¥–µ—Ç:</p>
<p><span class="math display">
\operatorname{Mul}(x, y)=\left(1+x_m\right) \cdot 2^{x_e} \cdot\left(1+y_m\right) \cdot 2^{y_e}=\left(1+x_m+y_m+x_m \cdot y_m\right) \cdot 2^{x_e+y_e}
</span></p>
<p>–ù–µ–¥–∞–≤–Ω–∏–µ —Å—Ç–∞—Ç—å–∏: <a href="https://arxiv.org/pdf/2410.00907">Addition is all you need</a> –ø—ã—Ç–∞—é—Ç—Å—è –¥–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –º—ã –º–æ–∂–µ–º –∑–∞–º–µ–Ω–∏—Ç—å —ç—Ç–æ —É–º–Ω–æ–∂–µ–Ω–∏–µ —Å–ª–æ–∂–µ–Ω–∏–µ–º –∏ –≤—Å–µ —Ä–∞–≤–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –æ–±—É—á–∞–µ–º—ã–µ –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏ (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏).</p>
</section>
<section id="—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è-–∏-–ø–ª–∞–≤–∞—é—â–∞—è-—Ç–æ—á–∫–∞" class="level2">
<h2 class="anchored" data-anchor-id="—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è-–∏-–ø–ª–∞–≤–∞—é—â–∞—è-—Ç–æ—á–∫–∞">–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏ –ø–ª–∞–≤–∞—é—â–∞—è —Ç–æ—á–∫–∞</h2>
<p><strong>–í</strong>: –ö–∞–∫–æ–≤—ã –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞/–Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ —á–∏—Å–µ–ª —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏ –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π?</p>
<p><strong>–û</strong>: –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ.</p>
<ul>
<li><p>–ß–∏—Å–ª–∞ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–æ—á–∫–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —á–∏—Å–ª–∞ –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç <strong>–∞–±—Å–æ–ª—é—Ç–Ω—É—é</strong> —Ç–æ—á–Ω–æ—Å—Ç—å.</p></li>
<li><p>–ß–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —á–∏—Å–ª–∞ —Å <strong>–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–π</strong> —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ —á–∏—Å–ª–∞ –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–π –º–∞—Å—à—Ç–∞–± (–Ω–∞–ø—Ä–∏–º–µ—Ä, <span class="math inline">10^{-1}</span> –∏ <span class="math inline">10^{5}</span>).</p></li>
<li><p>–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ, –µ—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ float32 –∏–ª–∏ float64 (–Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –Ω–µ—Ç!)</p></li>
</ul>
</section>
<section id="—á–∏—Å–ª–∞-—Å-–ø–ª–∞–≤–∞—é—â–µ–π-—Ç–æ—á–∫–æ–π-–Ω–∞-–ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–π-—à–∫–∞–ª–µ" class="level2">
<h2 class="anchored" data-anchor-id="—á–∏—Å–ª–∞-—Å-–ø–ª–∞–≤–∞—é—â–µ–π-—Ç–æ—á–∫–æ–π-–Ω–∞-–ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–π-—à–∫–∞–ª–µ">–ß–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –Ω–∞ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–π —à–∫–∞–ª–µ</h2>
<p>–í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ–º, –∫–∞–∫ —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –Ω–∞ –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –ø—Ä—è–º–æ–π:</p>
<div id="cell-12" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define parameters for a small floating-point system</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="dv">2</span>  <span class="co"># base</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>e_max <span class="op">=</span> <span class="dv">3</span>  <span class="co"># maximum exponent</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>mantissa_bits <span class="op">=</span> <span class="dv">2</span>  <span class="co"># number of bits for mantissa</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate all possible combinations of exponent and mantissa</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>exponents <span class="op">=</span> <span class="bu">range</span>(<span class="op">-</span>e_max, e_max <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>mantissas <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span> <span class="op">-</span> <span class="dv">2</span><span class="op">**</span>(<span class="op">-</span>mantissa_bits), <span class="dv">2</span><span class="op">**</span>mantissa_bits)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate floating-point numbers</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>fp_numbers <span class="op">=</span> []</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> e <span class="kw">in</span> exponents:</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> m <span class="kw">in</span> mantissas:</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>        fp_numbers.append((<span class="dv">1</span> <span class="op">+</span> m) <span class="op">*</span> b<span class="op">**</span>(e))</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort the numbers for proper visualization</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>fp_numbers.sort()</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Create figure</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the floating-point numbers</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>ax.scatter(fp_numbers, [<span class="dv">1</span>] <span class="op">*</span> <span class="bu">len</span>(fp_numbers), marker<span class="op">=</span><span class="st">'|'</span>, s<span class="op">=</span><span class="dv">100</span>, color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(<span class="fl">0.5</span>, <span class="fl">1.5</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>ax.set_yticks([])  <span class="co"># Remove y-axis ticks</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="vs">r'Distribution of Floating-Point Numbers (base=$</span><span class="sc">%d</span><span class="vs">$, max_exp=$</span><span class="sc">%d</span><span class="vs">$, mantissa_bits=$</span><span class="sc">%d</span><span class="vs">$)'</span> <span class="op">%</span> (b, e_max, mantissa_bits))</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Value'</span>)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Add text explanation</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>plt.figtext(<span class="fl">0.1</span>, <span class="op">-</span><span class="fl">0.05</span>, </span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="vs">r"Base (b) = $</span><span class="sc">%d</span><span class="vs">$, Max exponent = $</span><span class="sc">%d</span><span class="vs">$, Mantissa bits = $</span><span class="sc">%d</span><span class="vs">$"</span> <span class="op">%</span> (b, e_max, mantissa_bits) <span class="op">+</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="vs">r"Numbers are of the form $(1 + x_m) \cdot 2^e$, where $x_m$ is the fraction and $e$ is the exponent."</span>,</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    wrap<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.tight_layout()</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.show()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>Text(0.1, -0.05, 'Base (b) = $2$, Max exponent = $3$, Mantissa bits = $2$\nNumbers are of the form $(1 + x_m) \\cdot 2^e$, where $x_m$ is the fraction and $e$ is the exponent.')</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lecture-1_files/figure-html/cell-2-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ieee-754" class="level2">
<h2 class="anchored" data-anchor-id="ieee-754">IEEE 754</h2>
<p>–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —á–∏—Å–µ–ª —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è <a href="https://en.wikipedia.org/wiki/IEEE_floating_point">—Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º IEEE 754</a>, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –≤ <strong>1985</strong> –≥–æ–¥—É, –∏ –¥–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ —Ä–∞–∑–Ω—ã–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã –ø–æ-—Ä–∞–∑–Ω–æ–º—É —Ä–∞–±–æ—Ç–∞–ª–∏ —Å —á–∏—Å–ª–∞–º–∏ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π.</p>
<p>IEEE 754 –∏–º–µ–µ—Ç: - –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —á–∏—Å–µ–ª —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π (–∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤—ã—à–µ), <span class="math inline">(-1)^s \times c \times b^q</span>. - –î–≤–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏, <span class="math inline">+\infty</span> –∏ <span class="math inline">-\infty</span> - –î–≤–∞ –Ω—É–ª—è: +0 –∏ -0 - –î–≤–∞ –≤–∏–¥–∞ <strong>NaN</strong>: —Ç–∏—Ö–∏–π NaN (<strong>qNaN</strong>) –∏ —Å–∏–≥–Ω–∞–ª—å–Ω—ã–π NaN (<strong>sNaN</strong>) - qNaN –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π (FPU), –ø–æ–∫–∞ –≤—ã –Ω–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–π - –∑–Ω–∞—á–µ–Ω–∏–µ sNaN –≤—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç FPU –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. –≠—Ç–æ—Ç —Ç–∏–ø NaN –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è —Ü–µ–ª–µ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ - C++11 –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç <a href="https://en.cppreference.com/w/cpp/numeric/math/nan">—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</a> –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö NaN - –ü—Ä–∞–≤–∏–ª–∞ <strong>–æ–∫—Ä—É–≥–ª–µ–Ω–∏—è</strong> - –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è <span class="math inline">\frac{0}{0}, \frac{1}{-0}, \ldots</span></p>
<p>–í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é - –æ—Å–Ω–æ–≤–∞–Ω–∏—è <span class="math inline">b</span> - —Ç–æ—á–Ω–æ—Å—Ç–∏ <span class="math inline">p</span> - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏—Ñ—Ä - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è <span class="math inline">e_{\max}</span></p>
<p>–∏ –∏–º–µ—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è - $ 0 c b^p - 1$ - <span class="math inline">1 - e_{\max} \leq q + p - 1 \leq e_{\max}</span></p>
<p><strong>–ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö:</strong> - <code>qNaN</code> (—Ç–∏—Ö–∏–π NaN): - –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ - –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è - –ü—Ä–∏–º–µ—Ä: <code>0/0 ‚Üí qNaN</code>, <code>qNaN + 5 ‚Üí qNaN</code></p>
<ul>
<li><code>sNaN</code> (—Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π NaN):
<ul>
<li><strong>–í—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ</strong> –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤ –ª—é–±–æ–π –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏</li>
<li>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫</li>
<li>–ü—Ä–∏–º–µ—Ä: –ü–æ–ø—ã—Ç–∫–∞ —á—Ç–µ–Ω–∏—è –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏</li>
</ul></li>
</ul>
<p><strong>2. –ë–∏—Ç–æ–≤–∞—è —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è:</strong> –¢–∏–ø | –ó–Ω–∞–∫ | –≠–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞ | –ú–∞–Ω—Ç–∏—Å—Å–∞ | |‚Äî‚Äî‚Äì|‚Äî‚Äî|‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî|‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-| | qNaN | –ª—é–±–æ–π| –≤—Å–µ 1 | 1xxx‚Ä¶ (MSB=1) | | sNaN | –ª—é–±–æ–π| –≤—Å–µ 1 | 0xxx‚Ä¶ (MSB=0) |</p>
<p><em>MSB - —Å—Ç–∞—Ä—à–∏–π –±–∏—Ç –º–∞–Ω—Ç–∏—Å—Å—ã</em></p>
<p><strong>3. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ò–ò:</strong> - <code>qNaN</code>: - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞—Ö - –ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö - –ü—Ä–∏–º–µ—Ä: <code>NaN</code> –≤ –ª–æ—Å—Å–µ –ø—Ä–∏ batch-–æ–±—É—á–µ–Ω–∏–∏</p>
<ul>
<li><code>sNaN</code>:
<ul>
<li>–û—Ç–ª–∞–¥–∫–∞ —á–∏—Å–ª–µ–Ω–Ω–æ–π –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –≤ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —è–¥—Ä–∞—Ö CUDA</li>
<li>–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</li>
<li>–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö</li>
</ul></li>
</ul>
<p><strong>4. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:</strong> - –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ GPU (NVIDIA) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç sNaN - –í Python <code>math.nan</code> –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç qNaN - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ (PyTorch) –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç NaN –¥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π</p>
<p>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –æ—Ç–ª–∞–¥–∫–µ:</p>
<div id="cell-15" class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;slide&quot;}" data-execution_count="21">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">## –°–æ–∑–¥–∞–Ω–∏–µ sNaN (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ NumPy)</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>snan <span class="op">=</span> np.array([np.nan], dtype<span class="op">=</span>np.float32)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>snan.view(np.uint32)[<span class="dv">0</span>] <span class="op">=</span> <span class="bn">0x7F800001</span>  <span class="co"># –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è sNaN</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>np.seterr(invalid<span class="op">=</span><span class="st">'raise'</span>)  <span class="co"># –í–∫–ª—é—á–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏—Å–∫–ª—é—á–µ–Ω–∏–π</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> snan <span class="op">+</span> <span class="dv">2</span>  <span class="co"># –í—ã–∑–æ–≤–µ—Ç InvalidOperation</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">FloatingPointError</span>:</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —á–∏—Å–ª–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —á–∏—Å–ª–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞!</code></pre>
</div>
</div>
</section>
<section id="–æ–¥–∏–Ω–∞—Ä–Ω–∞—è-–∏-–¥–≤–æ–π–Ω–∞—è-—Ç–æ—á–Ω–æ—Å—Ç—å" class="level2">
<h2 class="anchored" data-anchor-id="–æ–¥–∏–Ω–∞—Ä–Ω–∞—è-–∏-–¥–≤–æ–π–Ω–∞—è-—Ç–æ—á–Ω–æ—Å—Ç—å">–û–¥–∏–Ω–∞—Ä–Ω–∞—è –∏ –¥–≤–æ–π–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å</h2>
<p>–î–≤–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞, –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ <strong>binary32</strong> –∏ <strong>binary64</strong> (—Ç–∞–∫–∂–µ –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ <strong>–æ–¥–∏–Ω–∞—Ä–Ω–æ–π</strong> –∏ <strong>–¥–≤–æ–π–Ω–æ–π</strong> —Ç–æ—á–Ω–æ—Å—Ç–∏). –í –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ñ–æ—Ä–º–∞—Ç <strong>binary16</strong> –∏–≥—Ä–∞–µ—Ç –≤–∞–∂–Ω—É—é —Ä–æ–ª—å –≤ –æ–±—É—á–µ–Ω–∏–∏ –≥–ª—É–±–æ–∫–∏—Ö –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
<th>–û–±—â–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</th>
<th>–û—Å–Ω–æ–≤–∞–Ω–∏–µ</th>
<th>–†–∞–∑—Ä—è–¥—ã</th>
<th>Emin</th>
<th>Emax</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>binary16</td>
<td>–ø–æ–ª–æ–≤–∏–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å</td>
<td>2</td>
<td>11</td>
<td>-14</td>
<td>+ 15</td>
</tr>
<tr class="even">
<td>binary32</td>
<td>–æ–¥–∏–Ω–∞—Ä–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å</td>
<td>2</td>
<td>24</td>
<td>-126</td>
<td>+ 127</td>
</tr>
<tr class="odd">
<td>binary64</td>
<td>–¥–≤–æ–π–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å</td>
<td>2</td>
<td>53</td>
<td>-1022</td>
<td>+1023</td>
</tr>
</tbody>
</table>
<p><img src="./double64.png"></p>
</section>
<section id="–ø—Ä–∏–º–µ—Ä—ã" class="level2">
<h2 class="anchored" data-anchor-id="–ø—Ä–∏–º–µ—Ä—ã">–ü—Ä–∏–º–µ—Ä—ã</h2>
<ul>
<li>–î–ª—è —á–∏—Å–ª–∞ +0
<ul>
<li><em>sign</em> —Ä–∞–≤–µ–Ω 0</li>
<li><em>exponent</em> —Ä–∞–≤–µ–Ω 00000000000</li>
<li><em>fraction</em> —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω—É–ª–µ–π</li>
</ul></li>
<li>–î–ª—è —á–∏—Å–ª–∞ -0
<ul>
<li><em>sign</em> —Ä–∞–≤–µ–Ω 1</li>
<li><em>exponent</em> —Ä–∞–≤–µ–Ω 00000000000</li>
<li><em>fraction</em> —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω—É–ª–µ–π</li>
</ul></li>
<li>–î–ª—è +–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏
<ul>
<li><em>sign</em> —Ä–∞–≤–µ–Ω 0</li>
<li><em>exponent</em> —Ä–∞–≤–µ–Ω 11111111111</li>
<li><em>fraction</em> —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω—É–ª–µ–π</li>
</ul></li>
</ul>
<p><strong>–í–æ–ø—Ä–æ—Å</strong>: —á—Ç–æ –Ω–∞—Å—á–µ—Ç -–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏ –∏ NaN?</p>
</section>
<section id="—Ç–æ—á–Ω–æ—Å—Ç—å-–∏-–ø–∞–º—è—Ç—å" class="level2">
<h2 class="anchored" data-anchor-id="—Ç–æ—á–Ω–æ—Å—Ç—å-–∏-–ø–∞–º—è—Ç—å">–¢–æ—á–Ω–æ—Å—Ç—å –∏ –ø–∞–º—è—Ç—å</h2>
<p><strong>–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å</strong> –æ–¥–∏–Ω–∞—Ä–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç <span class="math inline">10^{-7}-10^{-8}</span>, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –¥–ª—è –¥–≤–æ–π–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ - <span class="math inline">10^{-14}-10^{-16}</span>.</p>
<p><font color="red"> –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ 1: </font> <strong>float16</strong> –∑–∞–Ω–∏–º–∞–µ—Ç <strong>2 –±–∞–π—Ç–∞</strong>, <strong>float32</strong> –∑–∞–Ω–∏–º–∞–µ—Ç <strong>4 –±–∞–π—Ç–∞</strong>, <strong>float64</strong>, –∏–ª–∏ –¥–≤–æ–π–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –∑–∞–Ω–∏–º–∞–µ—Ç <strong>8 –±–∞–π—Ç</strong>.</p>
<p><font color="red"> –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ 2: </font> –¢–æ–ª—å–∫–æ —ç—Ç–∏ –¥–≤–∞ —Ç–∏–ø–∞ —á–∏—Å–µ–ª —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ (float32 –∏ float64) + –Ω–∞ GPU/TPU –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π.</p>
<p><font color="red"> –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ 3: </font> –í–∞–º —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <strong>–¥–≤–æ–π–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å</strong> –≤ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—É–∫–µ –∏ –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏, –∏ <strong>float32/float16</strong> –Ω–∞ GPU/–≤ –Ω–∞—É–∫–µ –æ –¥–∞–Ω–Ω—ã—Ö.</p>
<p>–°–µ–π—á–∞—Å –¥–ª—è –±–æ–ª—å—à–∏—Ö –º–æ–¥–µ–ª–µ–π float16 —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—Å–µ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–º.</p>
</section>
<section id="–∫–∞–∫-—Ñ–æ—Ä–º–∞—Ç-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è-—á–∏—Å–µ–ª-–≤–ª–∏—è–µ—Ç-–Ω–∞-–æ–±—É—á–µ–Ω–∏–µ-–Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö-—Å–µ—Ç–µ–π-–Ω—Å" class="level2">
<h2 class="anchored" data-anchor-id="–∫–∞–∫-—Ñ–æ—Ä–º–∞—Ç-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è-—á–∏—Å–µ–ª-–≤–ª–∏—è–µ—Ç-–Ω–∞-–æ–±—É—á–µ–Ω–∏–µ-–Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö-—Å–µ—Ç–µ–π-–Ω—Å">–ö–∞–∫ —Ñ–æ—Ä–º–∞—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —á–∏—Å–µ–ª –≤–ª–∏—è–µ—Ç –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π (–ù–°)?</h2>
<ul>
<li>–í–µ—Å–∞ –≤ —Å–ª–æ—è—Ö (–ø–æ–ª–Ω–æ—Å–≤—è–∑–Ω—ã—Ö, —Å–≤–µ—Ä—Ç–æ—á–Ω—ã—Ö, —Ñ—É–Ω–∫—Ü–∏—è—Ö –∞–∫—Ç–∏–≤–∞—Ü–∏–∏) –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Å —Ä–∞–∑–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é</li>
<li>–í–∞–∂–Ω–æ –ø–æ–≤—ã—à–∞—Ç—å —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –ù–°</li>
<li>–ü—Ä–æ–µ–∫—Ç <a href="https://github.com/facebookresearch/deepfloat">DeepFloat</a> –æ—Ç Facebook –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏ –ù–°, –ø–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –≤ —ç—Ç–æ–π <a href="https://arxiv.org/pdf/1811.01721.pdf">—Å—Ç–∞—Ç—å–µ</a></li>
<li>–í–ª–∏—è–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª –Ω–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏</li>
<li>–û–±—ã—á–Ω–æ –ø–µ—Ä–≤–∞—è —Ü–∏—Ñ—Ä–∞ —Ä–∞–≤–Ω–∞ –µ–¥–∏–Ω–∏—Ü–µ</li>
<li>–°—É–±–Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ –∏–º–µ—é—Ç –ø–µ—Ä–≤—É—é —Ü–∏—Ñ—Ä—É 0 –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –Ω—É–ª–µ–π –∏ —á–∏—Å–µ–ª, –±–ª–∏–∑–∫–∏—Ö –∫ –Ω—É–ª—é</li>
<li>–°—É–±–Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ –∑–∞–ø–æ–ª–Ω—è—é—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –º–µ–∂–¥—É –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏</li>
<li>–£ –Ω–∏—Ö –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, —á–∞—Å—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±–Ω—É–ª—è—é—Ç—Å—è</li>
</ul>
<p><img width="500," src="./grad_norm_fp16.png"></p>
<ul>
<li>–ò –Ω–∞ –∫—Ä–∏–≤—ã—Ö –æ–±—É—á–µ–Ω–∏—è</li>
</ul>
<p><img width="500," src="./train_val_curves.png"></p>
<p>–ì—Ä–∞—Ñ–∏–∫–∏ –≤–∑—è—Ç—ã –∏–∑ <a href="https://arxiv.org/pdf/1710.03740.pdf%EF%BC%89%E3%80%82">—ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏</a></p>
</section>
<section id="bfloat16-brain-floating-point" class="level2">
<h2 class="anchored" data-anchor-id="bfloat16-brain-floating-point">bfloat16 (Brain Floating Point)</h2>
<ul>
<li>–≠—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç –∑–∞–Ω–∏–º–∞–µ—Ç 16 –±–∏—Ç
<ul>
<li>1 –±–∏—Ç –¥–ª—è sign</li>
<li>8 –±–∏—Ç –¥–ª—è exponent</li>
<li>7 –±–∏—Ç –¥–ª—è fraction <img src="./bfloat16.png"></li>
</ul></li>
<li>–£—Å–µ—á–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ–¥–∏–Ω–∞—Ä–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ IEEE</li>
<li>–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É float32 –∏ float16?</li>
<li>–≠—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Intel FPGA, Google TPU, Xeon CPUs –∏ –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö</li>
</ul>
</section>
<section id="tensor-float-–æ—Ç-nvidia-–±–ª–æ–≥-–ø–æ—Å—Ç-–æ–±-—ç—Ç–æ–º-—Ñ–æ—Ä–º–∞—Ç–µ" class="level2">
<h2 class="anchored" data-anchor-id="tensor-float-–æ—Ç-nvidia-–±–ª–æ–≥-–ø–æ—Å—Ç-–æ–±-—ç—Ç–æ–º-—Ñ–æ—Ä–º–∞—Ç–µ">Tensor Float –æ—Ç Nvidia (<a href="https://blogs.nvidia.com/blog/2020/05/14/tensorfloat-32-precision-format/">–±–ª–æ–≥ –ø–æ—Å—Ç –æ–± —ç—Ç–æ–º —Ñ–æ—Ä–º–∞—Ç–µ</a>)</h2>
<ul>
<li>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏</li>
</ul>
<p><img src="./tensor_float_cf.png"></p>
<ul>
<li>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</li>
</ul>
<p><img src="./TF32-BERT.png"></p>
<ul>
<li>PyTorch –∏ Tensorflow —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —ç—Ç–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ <a href="https://ngc.nvidia.com/catalog/all">Nvidia NCG</a></li>
</ul>
</section>
<section id="–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞-—Å—Ç–∞–Ω–¥–∞—Ä—Ç—É-ieee-754" class="level2">
<h2 class="anchored" data-anchor-id="–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞-—Å—Ç–∞–Ω–¥–∞—Ä—Ç—É-ieee-754">–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É IEEE 754</h2>
<p>–ü—Ä–æ–±–ª–µ–º—ã –≤ IEEE 754: - –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å –∏–ª–∏ –Ω–æ–ª—å - –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö NaN - –Ω–µ–≤–∏–¥–∏–º—ã–µ –æ—à–∏–±–∫–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è - —Ç–æ—á–Ω–æ—Å—Ç—å –ª–∏–±–æ –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è, –ª–∏–±–æ –æ—á–µ–Ω—å –Ω–∏–∑–∫–∞—è - subnormal numbers ‚Äì —á–∏—Å–ª–∞ –º–µ–∂–¥—É 0 –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –≤–æ–∑–º–æ–∂–Ω—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º—ã–º —á–∏—Å–ª–æ–º, —Ç.–µ. significand –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω—É–ª—è</p>
<p>–ö–æ–Ω—Ü–µ–ø—Ü–∏—è <strong>posits</strong> –º–æ–∂–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π, —Å–º. <a href="http://www.johngustafson.net/pdfs/BeatingFloatingPoint.pdf">—ç—Ç—É —Å—Ç–∞—Ç—å—é</a></p>
<p><img width="600" src="./posit.png"></p>
<ul>
<li>–ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —á–∏—Å–ª–∞ —Å –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é, –Ω–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø—Ä–µ–¥–µ–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è</li>
<li>–Ω–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–π!</li>
<li>–ø—Ä–∏–º–µ—Ä –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —á–∏—Å–ª–∞</li>
</ul>
<p><img width="600" src="./posit_example.png"></p>
<section id="–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è-—Ç–æ—á–Ω–æ—Å—Ç–∏-–¥–µ–ª–µ–Ω–∏—è" class="level3">
<h3 class="anchored" data-anchor-id="–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è-—Ç–æ—á–Ω–æ—Å—Ç–∏-–¥–µ–ª–µ–Ω–∏—è">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–µ–ª–µ–Ω–∏—è</h3>
<div id="cell-24" class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;fragment&quot;}" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> np.float32(<span class="fl">0.925924589693</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(c)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.float32(<span class="fl">1.786875867457e-2</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.float32(c <span class="op">/</span> a)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="sc">{0:10.16f}</span><span class="st">'</span>.<span class="bu">format</span>(b))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">abs</span>(a <span class="op">*</span> b <span class="op">-</span> c)<span class="op">/</span><span class="bu">abs</span>(c))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.9259246
51.8180694580078125
0.0</code></pre>
</div>
</div>
</section>
<section id="–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π-–∫–æ—Ä–µ–Ω—å" class="level3">
<h3 class="anchored" data-anchor-id="–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π-–∫–æ—Ä–µ–Ω—å">–ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –∫–æ—Ä–µ–Ω—å</h3>
<div id="cell-26" class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;fragment&quot;}" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.float32(<span class="fl">1e-20</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.sqrt(a)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b.dtype)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="sc">{0:10.64f}</span><span class="st">'</span>.<span class="bu">format</span>(<span class="bu">abs</span>(b <span class="op">*</span> b <span class="op">-</span> a)<span class="op">/</span><span class="bu">abs</span>(a)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>float32
0.0000000807793583135207882151007652282714843750000000000000000000</code></pre>
</div>
</div>
</section>
<section id="–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è-—Ç–æ—á–Ω–æ—Å—Ç–∏-—ç–∫—Å–ø–æ–Ω–µ–Ω—Ç—ã" class="level3">
<h3 class="anchored" data-anchor-id="–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è-—Ç–æ—á–Ω–æ—Å—Ç–∏-—ç–∫—Å–ø–æ–Ω–µ–Ω—Ç—ã">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ç—ã</h3>
<div id="cell-28" class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;fragment&quot;}" data-execution_count="5">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.float32(<span class="fl">0.0001</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.exp(a)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b.dtype)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((np.log(b) <span class="op">-</span> a)<span class="op">/</span>a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>float32
0.000115978764</code></pre>
</div>
</div>
</section>
</section>
<section id="–µ—â–µ-–ø—Ä–∏–º–µ—Ä—á–∏–∫–∏" class="level2">
<h2 class="anchored" data-anchor-id="–µ—â–µ-–ø—Ä–∏–º–µ—Ä—á–∏–∫–∏">–ï—â–µ –ø—Ä–∏–º–µ—Ä—á–∏–∫–∏</h2>
<div id="cell-30" class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;slide&quot;}" data-execution_count="6">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create x points in the range [-2e-15, 2e-15]</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="op">-</span><span class="fl">2e-15</span>, <span class="fl">2e-15</span>, <span class="dv">100</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute log(1+x)/x - 1 using method (a) and (b), being careful about x=0</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>y_a <span class="op">=</span> np.zeros_like(x)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>y_b <span class="op">=</span> np.zeros_like(x)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>nonzero <span class="op">=</span> x <span class="op">!=</span> <span class="dv">0</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>y_a[nonzero] <span class="op">=</span> (np.log(x[nonzero]<span class="op">+</span><span class="dv">1</span>))<span class="op">/</span>x[nonzero] <span class="op">-</span> <span class="dv">1</span>  <span class="co"># (a)</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>y_b[nonzero] <span class="op">=</span> (np.log(x[nonzero]<span class="op">+</span><span class="dv">1</span>))<span class="op">/</span>((<span class="dv">1</span><span class="op">+</span>x[nonzero])<span class="op">-</span><span class="dv">1</span>) <span class="op">-</span> <span class="dv">1</span>  <span class="co"># (b</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the plots</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">6</span>))</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot for method (a)</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>ax1.plot(x, y_a, <span class="st">'b-'</span>)</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>ax1.grid(<span class="va">True</span>)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">'x'</span>)</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'log(1+x)/x - 1'</span>)</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'Method (a): (log(1+x))/x - 1'</span>)</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot for method (b)</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>ax2.plot(x, y_b, <span class="st">'r-'</span>)</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>ax2.grid(<span class="va">True</span>)</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">'x'</span>)</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'log(1+x)/x - 1'</span>)</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'Method (b): (log(1+x))/((1+x)-1) - 1'</span>)</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust layout and add a main title</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>fig.suptitle(<span class="st">'Comparison of two methods for computing log(1+x)/x - 1 in double precision'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>plt.subplots_adjust(top<span class="op">=</span><span class="fl">0.88</span>)</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/x_/_k8z8m6s2qxc_j4gwz6fpvmm0000gp/T/ipykernel_7697/1439480773.py:12: RuntimeWarning: invalid value encountered in divide
  y_b[nonzero] = (np.log(x[nonzero]+1))/((1+x[nonzero])-1) - 1  # (b</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lecture-1_files/figure-html/cell-7-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="–∏—Ç–æ–≥–∏-–¥–µ–º–æ" class="level2">
<h2 class="anchored" data-anchor-id="–∏—Ç–æ–≥–∏-–¥–µ–º–æ">–ò—Ç–æ–≥–∏ –¥–µ–º–æ</h2>
<ul>
<li>–î–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –æ–±—Ä–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–∞—é—Ç —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã</li>
<li>–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è accuracy –¥–æ–ª–∂–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è IEEE standard</li>
<li>–ù–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–ª—è –º–Ω–æ–≥–∏—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö GPU</li>
<li>–ë–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π –ø—Ä–æ –∞–¥–∞–ø—Ç–∞—Ü–∏—é IEEE 754 standard –¥–ª—è GPU –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ <a href="https://docs.nvidia.com/cuda/floating-point/index.html#considerations-for-heterogeneous-world">–∑–¥–µ—Å—å</a></li>
</ul>
</section>
<section id="–ø–æ—Ç–µ—Ä—è-–∑–Ω–∞—á–∏–º—ã—Ö-—Ü–∏—Ñ—Ä" class="level2">
<h2 class="anchored" data-anchor-id="–ø–æ—Ç–µ—Ä—è-–∑–Ω–∞—á–∏–º—ã—Ö-—Ü–∏—Ñ—Ä">–ü–æ—Ç–µ—Ä—è –∑–Ω–∞—á–∏–º—ã—Ö —Ü–∏—Ñ—Ä</h2>
<ul>
<li>–ú–Ω–æ–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –ø–æ—Ç–µ—Ä–µ —Ü–∏—Ñ—Ä <a href="https://en.wikipedia.org/wiki/Loss_of_significance">loss of significance</a></li>
<li>–ù–∞–ø—Ä–∏–º–µ—Ä, –ø–ª–æ—Ö–∞—è –∏–¥–µ—è –≤—ã—á–∏—Ç–∞—Ç—å –¥–≤–∞ –±–æ–ª—å—à–∏—Ö –±–ª–∏–∑–∫–∏—Ö —á–∏—Å–ª–∞, —Ä–∞–∑–Ω–æ—Å—Ç—å –±—É–¥–µ—Ç –∏–º–µ—Ç—å –º–µ–Ω—å—à–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ü–∏—Ñ—Ä</li>
<li>–≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏ –∏ –∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ (forward/backward stability), –∫–æ—Ç–æ—Ä—ã–µ –º—ã –æ–±—Å—É–¥–∏–º –ø–æ–∑–∂–µ</li>
</ul>
</section>
<section id="summation-algorithm" class="level2">
<h2 class="anchored" data-anchor-id="summation-algorithm">Summation algorithm</h2>
<p>–û–¥–Ω–∞–∫–æ –æ—à–∏–±–∫–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –º–æ–≥—É—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º–∞.</p>
<ul>
<li><p>–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ—Å—Ç–µ–π—à—É—é –∑–∞–¥–∞—á—É: –¥–∞–Ω—ã <span class="math inline">n</span> —á–∏—Å–µ–ª —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π <span class="math inline">x_1, \ldots, x_n</span></p></li>
<li><p>–í—ã—á–∏—Å–ª–∏—Ç—å –∏—Ö —Å—É–º–º—É</p></li>
</ul>
<p><span class="math display">S = \sum_{i=1}^n x_i = x_1 + \ldots + x_n.</span></p>
<ul>
<li><p>–ü—Ä–æ—Å—Ç–µ–π—à–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º - —Å–∫–ª–∞–¥—ã–≤–∞—Ç—å —á–∏—Å–ª–∞ –æ–¥–Ω–æ –∑–∞ –¥—Ä—É–≥–∏–º</p></li>
<li><p>–ö–∞–∫–æ–≤–∞ —Ä–µ–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ —Ç–∞–∫–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞?</p></li>
</ul>
</section>
<section id="–Ω–∞–∏–≤–Ω—ã–π-–∞–ª–≥–æ—Ä–∏—Ç–º" class="level2">
<h2 class="anchored" data-anchor-id="–Ω–∞–∏–≤–Ω—ã–π-–∞–ª–≥–æ—Ä–∏—Ç–º">–ù–∞–∏–≤–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º</h2>
<p><span class="math display">y_1 = x_1, \quad y_2 = y_1 + x_2, \quad y_3 = y_2 + x_3, \ldots.</span></p>
<ul>
<li><p><strong>Worst-case</strong> –æ—à–∏–±–∫–∞ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ <span class="math inline">\mathcal{O}(n)</span>, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ <strong>mean-squared</strong> –æ—à–∏–±–∫–∞ —Ä–∞–≤–Ω–∞ <span class="math inline">\mathcal{O}(\sqrt{n})</span>.</p></li>
<li><p><strong>Kahan algorithm</strong> –¥–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü—É <strong>worst-case</strong> –æ—à–∏–±–∫–∏ <span class="math inline">\mathcal{O}(1)</span> (—Ç.–µ. –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç <span class="math inline">n</span>).</p></li>
<li><p><font color="red"> –ú–æ–∂–µ—Ç–µ –ª–∏ –≤—ã –Ω–∞–π—Ç–∏ –∞–ª–≥–æ—Ä–∏—Ç–º –ª—É—á—à–µ?</font></p></li><font color="red">
</font></ul><font color="red">
</font></section><font color="red">
<section id="—Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ-–∫–∞—Ö–∞–Ω–∞" class="level2">
<h2 class="anchored" data-anchor-id="—Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ-–∫–∞—Ö–∞–Ω–∞">–°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ö–∞—Ö–∞–Ω–∞</h2>
<p>–°–ª–µ–¥—É—é—â–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–∞–µ—Ç –æ—à–∏–±–∫—É <span class="math inline">2 \varepsilon + \mathcal{O}(n \varepsilon^2)</span>, –≥–¥–µ <span class="math inline">\varepsilon</span> - —ç—Ç–æ machine precision.</p>
<ul>
<li>–ü—Ä–∏—á–∏–Ω–∞ –ø–æ—Ç–µ—Ä–∏ –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —Å —á–∏—Å–ª–∞–º–∏ —Ä–∞–∑–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞</li>
<li>–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è Kahan summation —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏ –∞–∫–∫—É–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π</li>
<li>–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è <em>compensated summation</em></li>
</ul>
<div id="cell-36" class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;slide&quot;}" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numba <span class="im">import</span> jit <span class="im">as</span> numba_jit</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">10</span> <span class="op">**</span> <span class="dv">6</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>sm <span class="op">=</span> <span class="fl">1e-10</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.ones(n, dtype<span class="op">=</span>np.float32) <span class="op">*</span> sm</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">0</span>] <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>true_sum <span class="op">=</span> <span class="fl">1.0</span> <span class="op">+</span> (n <span class="op">-</span> <span class="dv">1</span>)<span class="op">*</span>sm</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>approx_sum <span class="op">=</span> np.<span class="bu">sum</span>(x)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>math_fsum <span class="op">=</span> math.fsum(x)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="at">@numba_jit</span>(nopython<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> kahan_sum_numba(x):</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> np.float32(<span class="fl">0.0</span>)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> np.float32(<span class="fl">0.0</span>)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(x)):</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> x[i] <span class="op">-</span> c</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> s <span class="op">+</span> y</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> (t <span class="op">-</span> s) <span class="op">-</span> y</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> t</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> s</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> simple_sum(x):</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(x)):</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>        s <span class="op">+=</span> x[i]</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> s</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>k_sum_numba <span class="op">=</span> kahan_sum_numba(x)</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>simple_sum_result <span class="op">=</span> simple_sum(x)</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Error in np sum: </span><span class="sc">{0:3.1e}</span><span class="st">'</span>.<span class="bu">format</span>(approx_sum <span class="op">-</span> true_sum))</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Error in simple sum: </span><span class="sc">{0:3.1e}</span><span class="st">'</span>.<span class="bu">format</span>(simple_sum_result <span class="op">-</span> true_sum))</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Error in Kahan sum Numba: </span><span class="sc">{0:3.1e}</span><span class="st">'</span>.<span class="bu">format</span>(k_sum_numba <span class="op">-</span> true_sum))</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Error in math fsum: </span><span class="sc">{0:3.1e}</span><span class="st">'</span>.<span class="bu">format</span>(math_fsum <span class="op">-</span> true_sum))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Error in np sum: 1.7e-06
Error in simple sum: -1.0e-04
Error in Kahan sum Numba: 1.7e-08
Error in math fsum: 1.3e-12</code></pre>
</div>
</div>
</section>
<section id="–∏—Ç–æ–≥–æ" class="level2">
<h2 class="anchored" data-anchor-id="–∏—Ç–æ–≥–æ">–ò—Ç–æ–≥–æ</h2>
<ul>
<li><p>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã—Ç—å –æ—á–µ–Ω—å –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–º —Å —á–∏—Å–ª–∞–º–∏ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –º–æ–≥—É—Ç –¥–∞–≤–∞—Ç—å –Ω–µ–≤–µ—Ä–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è.</p></li>
<li><p>–î–ª—è –º–Ω–æ–≥–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ö–æ—Ä–æ—à–æ –∏–∑—É—á–µ–Ω–∞ –∏ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã.</p></li>
</ul>
</section>
<section id="–≤–µ–∫—Ç–æ—Ä—ã" class="level2">
<h2 class="anchored" data-anchor-id="–≤–µ–∫—Ç–æ—Ä—ã">–í–µ–∫—Ç–æ—Ä—ã</h2>
<ul>
<li>–í —á–∏—Å–ª–µ–Ω–Ω–æ–π –ª–∏–Ω–µ–π–Ω–æ–π –∞–ª–≥–µ–±—Ä–µ –º—ã –æ–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–µ —Å <strong>—á–∏—Å–ª–∞–º–∏</strong>, –∞ —Å <strong>–≤–µ–∫—Ç–æ—Ä–∞–º–∏</strong></li>
<li>–ù–∞–ø–æ–º–Ω–∏–º, —á—Ç–æ –≤–µ–∫—Ç–æ—Ä –≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –±–∞–∑–∏—Å–µ —Ä–∞–∑–º–µ—Ä–∞ <span class="math inline">n</span> –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ –æ–¥–Ω–æ–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ —Å <span class="math inline">n</span> —á–∏—Å–ª–∞–º–∏</li>
<li>–ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –æ–Ω —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ –º–∞—Ç—Ä–∏—Ü–∞ —Ä–∞–∑–º–µ—Ä–∞ <span class="math inline">n \times 1</span> (<strong>–≤–µ–∫—Ç–æ—Ä-—Å—Ç–æ–ª–±–µ—Ü</strong>)</li>
</ul>
<p><strong>–ü—Ä–∏–º–µ—Ä:</strong> –ú–Ω–æ–≥–æ—á–ª–µ–Ω—ã —Å—Ç–µ–ø–µ–Ω–∏ <span class="math inline">\leq n</span> –æ–±—Ä–∞–∑—É—é—Ç –ª–∏–Ω–µ–π–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ. –ú–Ω–æ–≥–æ—á–ª–µ–Ω $ x^3 - 2x^2 + 1$ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ –≤–µ–∫—Ç–æ—Ä <span class="math inline">\begin{bmatrix}1 \\ -2 \\ 0 \\ 1\end{bmatrix}</span> –≤ –±–∞–∑–∏—Å–µ <span class="math inline">\{x^3, x^2, x, 1\}</span></p>
</section>
<section id="–Ω–æ—Ä–º–∞-–≤–µ–∫—Ç–æ—Ä–∞" class="level2">
<h2 class="anchored" data-anchor-id="–Ω–æ—Ä–º–∞-–≤–µ–∫—Ç–æ—Ä–∞">–ù–æ—Ä–º–∞ –≤–µ–∫—Ç–æ—Ä–∞</h2>
<ul>
<li><p>–í–µ–∫—Ç–æ—Ä—ã –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç (–ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ–µ) –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ (–∏–ª–∏ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –¥—Ä—É–≥–æ–≥–æ) –æ–±—ä–µ–∫—Ç–∞</p></li>
<li><p>–û–¥–∏–Ω –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ - –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–Ω—ã–º —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ (1%, 10%)</p></li>
<li><p>–ü—Ä–∏–µ–º–ª–µ–º–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, –∫–æ–Ω–µ—á–Ω–æ, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä:</p>
<ul>
<li>–í –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —É—Ä–∞–≤–Ω–µ–Ω–∏—è—Ö –≤ —á–∞—Å—Ç–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö —Ç–æ—á–Ω–æ—Å—Ç–∏ <span class="math inline">10^{-5} - 10^{-10}</span> —è–≤–ª—è—é—Ç—Å—è —Ç–∏–ø–∏—á–Ω—ã–º —Å–ª—É—á–∞–µ–º</li>
<li>–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∞–Ω–Ω—ã—Ö, –∏–Ω–æ–≥–¥–∞ –æ—à–∏–±–∫–∞ –≤ <span class="math inline">80\%</span> –¥–æ–ø—É—Å—Ç–∏–º–∞, —Ç–∞–∫ –∫–∞–∫ –ø–æ–ª–µ–∑–Ω—ã–π —Å–∏–≥–Ω–∞–ª –∏—Å–∫–∞–∂–µ–Ω —Å–∏–ª—å–Ω—ã–º —à—É–º–æ–º</li>
</ul></li>
</ul>
</section>
<section id="—Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è-–∏-–Ω–æ—Ä–º—ã" class="level2">
<h2 class="anchored" data-anchor-id="—Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è-–∏-–Ω–æ—Ä–º—ã">–†–∞—Å—Å—Ç–æ—è–Ω–∏—è –∏ –Ω–æ—Ä–º—ã</h2>
<ul>
<li>–ù–æ—Ä–º–∞ - —ç—Ç–æ <strong>–∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –º–µ—Ä–∞ –º–∞–ª–æ—Å—Ç–∏ –≤–µ–∫—Ç–æ—Ä–∞</strong>, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ã—á–Ω–æ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –∫–∞–∫ <span class="math inline">\Vert x \Vert</span>.</li>
</ul>
<p>–ù–æ—Ä–º–∞ –¥–æ–ª–∂–Ω–∞ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Å–≤–æ–π—Å—Ç–≤–∞–º:</p>
<ul>
<li><span class="math inline">\Vert \alpha x \Vert = |\alpha| \Vert x \Vert</span></li>
<li><span class="math inline">\Vert x + y \Vert \leq \Vert x \Vert + \Vert y \Vert</span> (–Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞)</li>
<li>–ï—Å–ª–∏ <span class="math inline">\Vert x \Vert = 0</span>, —Ç–æ <span class="math inline">x = 0</span></li>
</ul>
<p>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫</p>
<p><span class="math display"> d(x, y) = \Vert x - y \Vert. </span></p>
<p>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–æ—Ä–º—ã –ù–∞–∏–±–æ–ª–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–π –∏ —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –Ω–æ—Ä–º–æ–π —è–≤–ª—è–µ—Ç—Å—è <strong>–µ–≤–∫–ª–∏–¥–æ–≤–∞ –Ω–æ—Ä–º–∞</strong>:</p>
<p><span class="math display">\Vert x \Vert_2 = \sqrt{\sum_{i=1}^n |x_i|^2},</span></p>
<p>–∫–æ—Ç–æ—Ä–∞—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é –≤ –Ω–∞—à–µ–π —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏. –ï—Å–ª–∏ –≤–µ–∫—Ç–æ—Ä—ã –∏–º–µ—é—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö –º–æ–¥—É–ª—å.</p>
</section>
<section id="p-–Ω–æ—Ä–º–∞" class="level2">
<h2 class="anchored" data-anchor-id="p-–Ω–æ—Ä–º–∞"><span class="math inline">p</span>-–Ω–æ—Ä–º–∞</h2>
<p>–ï–≤–∫–ª–∏–¥–æ–≤–∞ –Ω–æ—Ä–º–∞, –∏–ª–∏ <span class="math inline">2</span>-–Ω–æ—Ä–º–∞, —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥–∫–ª–∞—Å—Å–æ–º –≤–∞–∂–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ <span class="math inline">p</span>-–Ω–æ—Ä–º:</p>
<p><span class="math display"> \Vert x \Vert_p = \Big(\sum_{i=1}^n |x_i|^p\Big)^{1/p}. </span></p>
<p>–°—É—â–µ—Å—Ç–≤—É—é—Ç –¥–≤–∞ –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã—Ö —á–∞—Å—Ç–Ω—ã—Ö —Å–ª—É—á–∞—è: - –ù–æ—Ä–º–∞ –ß–µ–±—ã—à–µ–≤–∞, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º:</p>
<p><span class="math display"> \Vert x \Vert_{\infty} = \max_i | x_i| </span></p>
<p><img src="chebyshev.jpeg"></p>
<ul>
<li><span class="math inline">L_1</span> –Ω–æ—Ä–º–∞ (–∏–ª–∏ <strong>–º–∞–Ω—Ö—ç—Ç—Ç–µ–Ω—Å–∫–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ</strong>), –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ —Å—É–º–º–∞ –º–æ–¥—É–ª–µ–π —ç–ª–µ–º–µ–Ω—Ç–æ–≤ <span class="math inline">x</span>:</li>
</ul>
<p><span class="math display"> \Vert x \Vert_1 = \sum_i |x_i| </span></p>
<p><img src="manhattan.jpeg"></p>
</section>
<section id="—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç—å-–Ω–æ—Ä–º" class="level2">
<h2 class="anchored" data-anchor-id="—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç—å-–Ω–æ—Ä–º">–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç—å –Ω–æ—Ä–º</h2>
<p>–í—Å–µ –Ω–æ—Ä–º—ã —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã –≤ —Ç–æ–º —Å–º—ã—Å–ª–µ, —á—Ç–æ</p>
<p><span class="math display"> C_1 \Vert x \Vert_* \leq  \Vert x \Vert_{**} \leq C_2 \Vert x \Vert_* </span></p>
<p>–¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç <span class="math inline">C_1(n), C_2(n)</span>, <span class="math inline">x \in \mathbb{R}^n</span> –¥–ª—è –ª—é–±–æ–π –ø–∞—Ä—ã –Ω–æ—Ä–º <span class="math inline">\Vert \cdot \Vert_*</span> –∏ <span class="math inline">\Vert \cdot \Vert_{**}</span>. –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç—å –Ω–æ—Ä–º –ø–æ —Å—É—â–µ—Å—Ç–≤—É –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –≤–µ–∫—Ç–æ—Ä –º–∞–ª –≤ –æ–¥–Ω–æ–π –Ω–æ—Ä–º–µ, —Ç–æ –æ–Ω –º–∞–ª –∏ –≤ –¥—Ä—É–≥–æ–π –Ω–æ—Ä–º–µ. –û–¥–Ω–∞–∫–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º–∏.</p>
</section>
<section id="–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ-–Ω–æ—Ä–º-–≤-python" class="level2">
<h2 class="anchored" data-anchor-id="–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ-–Ω–æ—Ä–º-–≤-python">–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –Ω–æ—Ä–º –≤ Python</h2>
<p>–ü–∞–∫–µ—Ç NumPy —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–æ—Ä–º: —Ñ—É–Ω–∫—Ü–∏—è <code>np.linalg.norm</code></p>
<div id="cell-45" class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;fragment&quot;}" data-execution_count="11">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.random.randn(n)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> a <span class="op">+</span> <span class="fl">1e-1</span> <span class="op">*</span> np.random.normal((n,))</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Relative error in L1 norm:'</span>, np.linalg.norm(a <span class="op">-</span> b, <span class="dv">1</span>) <span class="op">/</span> np.linalg.norm(b, <span class="dv">1</span>))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Relative error in L2 norm:'</span>, np.linalg.norm(a <span class="op">-</span> b) <span class="op">/</span> np.linalg.norm(b))</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Relative error in Chebyshev norm:'</span>, np.linalg.norm(a <span class="op">-</span> b, np.inf) <span class="op">/</span> np.linalg.norm(b, np.inf))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Relative error in L1 norm: 1.007463406918509
Relative error in L2 norm: 1.0030695138070433
Relative error in Chebyshev norm: 0.7942525068309023</code></pre>
</div>
</div>
</section>
<section id="–µ–¥–∏–Ω–∏—á–Ω—ã–µ-—à–∞—Ä—ã-–≤-—Ä–∞–∑–ª–∏—á–Ω—ã—Ö-–Ω–æ—Ä–º–∞—Ö" class="level2">
<h2 class="anchored" data-anchor-id="–µ–¥–∏–Ω–∏—á–Ω—ã–µ-—à–∞—Ä—ã-–≤-—Ä–∞–∑–ª–∏—á–Ω—ã—Ö-–Ω–æ—Ä–º–∞—Ö">–ï–¥–∏–Ω–∏—á–Ω—ã–µ —à–∞—Ä—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω–æ—Ä–º–∞—Ö</h2>
<ul>
<li>–ï–¥–∏–Ω–∏—á–Ω—ã–π —à–∞—Ä - —ç—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫, —Ç–∞–∫–∏—Ö —á—Ç–æ <span class="math inline">\Vert x \Vert \leq 1</span></li>
<li>–î–ª—è –µ–≤–∫–ª–∏–¥–æ–≤–æ–π –Ω–æ—Ä–º—ã –µ–¥–∏–Ω–∏—á–Ω—ã–π —à–∞—Ä —è–≤–ª—è–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–º –∫—Ä—É–≥–æ–º</li>
<li>–î–ª—è –¥—Ä—É–≥–∏—Ö –Ω–æ—Ä–º –µ–¥–∏–Ω–∏—á–Ω—ã–µ —à–∞—Ä—ã –≤—ã–≥–ª—è–¥—è—Ç —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É</li>
</ul>
<div id="cell-47" class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;fragment&quot;}" data-execution_count="8">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="dv">1</span> <span class="co"># Which norm do we use</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> <span class="dv">40000</span> <span class="co"># Number of sampling points</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> []</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(M):</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> np.random.randn(<span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.linalg.norm(a[:, <span class="dv">0</span>], p) <span class="op">&lt;=</span> <span class="dv">1</span>:</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>        b.append(a[:, <span class="dv">0</span>])</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.array(b)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>plt.plot(b[:, <span class="dv">0</span>], b[:, <span class="dv">1</span>], <span class="st">'.'</span>)</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'equal'</span>)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Unit disk in the p-th norm, $p=</span><span class="sc">{0:}</span><span class="st">$'</span>.<span class="bu">format</span>(p))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>Text(0.5, 1.0, 'Unit disk in the p-th norm, $p=1$')</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lecture-1_files/figure-html/cell-10-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="—á—Ç–æ-—Ç–∞–∫–æ–µ-—É—Å—Ç–æ–π—á–∏–≤—ã–π-–∞–ª–≥–æ—Ä–∏—Ç–º" class="level2">
<h2 class="anchored" data-anchor-id="—á—Ç–æ-—Ç–∞–∫–æ–µ-—É—Å—Ç–æ–π—á–∏–≤—ã–π-–∞–ª–≥–æ—Ä–∏—Ç–º">–ß—Ç–æ —Ç–∞–∫–æ–µ —É—Å—Ç–æ–π—á–∏–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º?</h2>
<p>–ò –º—ã –∑–∞–≤–µ—Ä—à–∞–µ–º –ª–µ–∫—Ü–∏—é –ø–æ–Ω—è—Ç–∏–µ–º <strong>—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏</strong>.</p>
<ul>
<li>–ü—É—Å—Ç—å <span class="math inline">x</span> - –æ–±—ä–µ–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ–∫—Ç–æ—Ä)</li>
<li>–ü—É—Å—Ç—å <span class="math inline">f(x)</span> - —Ñ—É–Ω–∫—Ü–∏—è (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª), –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã—á–∏—Å–ª–∏—Ç—å</li>
</ul>
<p>–£ –≤–∞—Å —Ç–∞–∫–∂–µ –µ—Å—Ç—å <strong>—á–∏—Å–ª–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º</strong> <code>alg(x)</code>, –∫–æ—Ç–æ—Ä—ã–π —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç <strong>–ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ</strong> –∫ <span class="math inline">f(x)</span>.</p>
<p>–ê–ª–≥–æ—Ä–∏—Ç–º –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è <strong>—É—Å—Ç–æ–π—á–∏–≤—ã–º</strong>, –µ—Å–ª–∏</p>
<p><span class="math display">\Vert \text{alg}(x) - f(x) \Vert  \leq \varepsilon </span></p>
<p>–ê–ª–≥–æ—Ä–∏—Ç–º –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è <strong>–æ–±—Ä–∞—Ç–Ω–æ —É—Å—Ç–æ–π—á–∏–≤—ã–º</strong>, –µ—Å–ª–∏ –¥–ª—è –ª—é–±–æ–≥–æ <span class="math inline">x</span> —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –±–ª–∏–∑–∫–∏–π –≤–µ–∫—Ç–æ—Ä <span class="math inline">x + \delta x</span> —Ç–∞–∫–æ–π, —á—Ç–æ</p>
<p><span class="math display">\text{alg}(x) = f(x + \delta x)</span></p>
<p>–∏ <span class="math inline">\Vert \delta x \Vert</span> –º–∞–ª–æ.</p>
</section>
<section id="–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π-–ø—Ä–∏–º–µ—Ä" class="level2">
<h2 class="anchored" data-anchor-id="–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π-–ø—Ä–∏–º–µ—Ä">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä</h2>
<p>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–º–µ—Ä–æ–º —è–≤–ª—è–µ—Ç—Å—è <strong>—Ä–µ—à–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º –ª–∏–Ω–µ–π–Ω—ã—Ö —É—Ä–∞–≤–Ω–µ–Ω–∏–π</strong> —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ –ì–∞—É—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Ö–æ–∂ –Ω–∞ LU-—Ä–∞–∑–ª–æ–∂–µ–Ω–∏–µ (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –ø–æ–∑–∂–µ)</p>
<p>–†–∞—Å—Å–º–æ—Ç—Ä–∏–º <strong>–º–∞—Ç—Ä–∏—Ü—É –ì–∏–ª—å–±–µ—Ä—Ç–∞</strong> —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏</p>
<p><span class="math display">A = \{a_{ij}\}, \quad a_{ij} = \frac{1}{i + j + 1}, \quad i,j = 0, \ldots, n-1.</span></p>
<p>–ò —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ª–∏–Ω–µ–π–Ω—É—é —Å–∏—Å—Ç–µ–º—É</p>
<p><span class="math display">Ax = f.</span></p>
<div id="cell-50" class="cell" data-scrolled="false" data-slideshow="{&quot;slide_type&quot;:&quot;slide&quot;}" data-execution_count="12">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [[<span class="fl">1.0</span><span class="op">/</span>(i <span class="op">+</span> j <span class="op">+</span> <span class="dv">1</span>) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n)] <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(n)] <span class="co"># Hilbert matrix</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> np.array(a)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>rhs <span class="op">=</span>  np.random.randn(n)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>rhs <span class="op">=</span> np.ones(n)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>sol <span class="op">=</span> np.linalg.solve(A, rhs)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.norm(A <span class="op">@</span> sol <span class="op">-</span> rhs)<span class="op">/</span>np.linalg.norm(rhs))</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>plt.plot(sol)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>8.945456835802865e-08</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="lecture-1_files/figure-html/cell-11-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-51" class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;slide&quot;}" data-execution_count="34">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>rhs <span class="op">=</span> np.ones(n)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>sol <span class="op">=</span> np.linalg.solve(A, rhs)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.linalg.norm(A <span class="op">@</span> sol <span class="op">-</span> rhs)<span class="op">/</span>np.linalg.norm(rhs))</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.plot(sol)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.0018351191</code></pre>
</div>
</div>
</section>
<section id="–±–æ–ª—å—à–µ-–ø—Ä–∏–º–µ—Ä–æ–≤-–Ω–µ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏" class="level2">
<h2 class="anchored" data-anchor-id="–±–æ–ª—å—à–µ-–ø—Ä–∏–º–µ—Ä–æ–≤-–Ω–µ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏">–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –Ω–µ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏</h2>
<p>–ö–∞–∫ –≤—ã—á–∏—Å–ª–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —á–∏—Å–ª–µ–Ω–Ω–æ —É—Å—Ç–æ–π—á–∏–≤—ã–º —Å–ø–æ—Å–æ–±–æ–º?</p>
<ul>
<li><span class="math inline">\log(1 - \tanh^2(x))</span></li>
<li><span class="math inline">\text{SoftMax}(x)_j = \dfrac{e^{x_j}}{\sum\limits_{i=1}^n e^{x_i}}</span></li>
</ul>
<div id="cell-53" class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;slide&quot;}" data-execution_count="13">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>u <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>eps <span class="op">=</span> <span class="fl">1e-6</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"–ò—Å—Ö–æ–¥–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:"</span>, np.log(<span class="dv">1</span> <span class="op">-</span> np.tanh(u)<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>eps_add <span class="op">=</span> np.log(<span class="dv">1</span> <span class="op">-</span> np.tanh(u)<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> eps)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"–ü–æ–ø—ã—Ç–∫–∞ —É–ª—É—á—à–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –º–∞–ª–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:"</span>, eps_add)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ —á–∏—Å–ª–µ–Ω–Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ñ–æ—Ä–º—ã:"</span>, np.log(<span class="dv">4</span>) <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> np.log(np.exp(<span class="op">-</span>u) <span class="op">+</span> np.exp(u)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>–ò—Å—Ö–æ–¥–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: -inf
–ü–æ–ø—ã—Ç–∫–∞ —É–ª—É—á—à–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –º–∞–ª–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã: -13.815510557964274
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ —á–∏—Å–ª–µ–Ω–Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ñ–æ—Ä–º—ã: -58.61370563888011</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/x_/_k8z8m6s2qxc_j4gwz6fpvmm0000gp/T/ipykernel_7697/1002619719.py:3: RuntimeWarning: divide by zero encountered in log
  print("–ò—Å—Ö–æ–¥–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:", np.log(1 - np.tanh(u)**2))</code></pre>
</div>
</div>
<div id="cell-54" class="cell" data-slideshow="{&quot;slide_type&quot;:&quot;slide&quot;}" data-execution_count="15">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.random.normal(size<span class="op">=</span>(n,))</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.exp(x) <span class="op">/</span> np.<span class="bu">sum</span>(np.exp(x)))</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.exp(x <span class="op">-</span> np.<span class="bu">max</span>(x)) <span class="op">/</span> np.<span class="bu">sum</span>(np.exp(x <span class="op">-</span> np.<span class="bu">max</span>(x))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[nan  0.  0.  0.  0.]
[1. 0. 0. 0. 0.]</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/x_/_k8z8m6s2qxc_j4gwz6fpvmm0000gp/T/ipykernel_7697/1311588733.py:4: RuntimeWarning: overflow encountered in exp
  print(np.exp(x) / np.sum(np.exp(x)))
/var/folders/x_/_k8z8m6s2qxc_j4gwz6fpvmm0000gp/T/ipykernel_7697/1311588733.py:4: RuntimeWarning: invalid value encountered in divide
  print(np.exp(x) / np.sum(np.exp(x)))</code></pre>
</div>
</div>
</section>
<section id="–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤—ã–≤–æ–¥—ã" class="level2">
<h2 class="anchored" data-anchor-id="–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤—ã–≤–æ–¥—ã">–û—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–≤–æ–¥—ã</h2>
<ul>
<li>–ß–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π (–¥–≤–æ–π–Ω–∞—è, –æ–¥–∏–Ω–∞—Ä–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç), –æ—à–∏–±–∫–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è</li>
<li>–ù–æ—Ä–º—ã –∫–∞–∫ –º–µ—Ä—ã –º–∞–ª–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏</li>
<li>–ù–æ—Ä–º—ã: <span class="math inline">1</span>, <span class="math inline">p</span> –∏ –µ–≤–∫–ª–∏–¥–æ–≤–∞</li>
<li>–ü—Ä—è–º–∞—è/–æ–±—Ä–∞—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ (–∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤) (–≤ —Å–ª–µ–¥—É—é—â–∏—Ö –ª–µ–∫—Ü–∏—è—Ö)</li>
</ul>


</section>
</font></section><font color="red">

</font></main><font color="red"> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/nla360\.fmin\.xyz");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</font></div><footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions"><ul><li><a href="https://github.dev/MerkulovDaniil/nla360/blob/main/lectures/lecture-1/lecture-1.ipynb" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer><font color="red"> <!-- /content -->




</font></body></html>